
jQuery(document).ready(function(B){wpdiscuzValidator.message.invalid=wpdiscuz_ajax_obj.wpdiscuz_options.wc_invalid_field;wpdiscuzValidator.message.empty=wpdiscuz_ajax_obj.wpdiscuz_options.wc_error_empty_text;wpdiscuzValidator.message.email=wpdiscuz_ajax_obj.wpdiscuz_options.wc_error_email_text;wpdiscuzValidator.message.url=wpdiscuz_ajax_obj.wpdiscuz_options.wc_error_url_text;wpdiscuzValidator.message.min=wpdiscuz_ajax_obj.wpdiscuz_options.wc_msg_comment_text_min_length;wpdiscuzValidator.message.max=wpdiscuz_ajax_obj.wpdiscuz_options.wc_msg_comment_text_max_length;var P=wpdiscuz_ajax_obj.wpdiscuz_options.is_user_logged_in;var p=wpdiscuz_ajax_obj.wpdiscuz_options.wc_captcha_show_hide==0&&!P;var O=wpdiscuz_ajax_obj.wpdiscuz_options.wc_captcha_show_hide_for_members>0&&P;var z=wpdiscuz_ajax_obj.wpdiscuz_options.commentListLoadType;var T=wpdiscuz_ajax_obj.wpdiscuz_options.wordpressIsPaginate;var m=wpdiscuz_ajax_obj.wpdiscuz_options.wc_post_id;var i=wpdiscuz_ajax_obj.wpdiscuz_options.commentListUpdateType;var h=wpdiscuz_ajax_obj.wpdiscuz_options.commentListUpdateTimer;var G=wpdiscuz_ajax_obj.wpdiscuz_options.liveUpdateGuests;var Q=wpdiscuz_ajax_obj.wpdiscuz_options.loadLastCommentId;var a=wpdiscuz_ajax_obj.wpdiscuz_options.wordpress_comment_order;var F=wpdiscuz_ajax_obj.wpdiscuz_options.commentsVoteOrder;var b=0;var k="comment_date_gmt";var K=[];var t=[];C();f();if(F){B(".wpdiscuz-vote-sort-up").addClass("wpdiscuz-sort-button-active");k="meta_value_num";b=1}else{B(".wpdiscuz-date-sort-"+a).addClass("wpdiscuz-sort-button-active")}B("#wc_unsubscribe_message").delay(7000).fadeOut(1500,function(){B(this).remove();location.href=location.href.substring(0,location.href.indexOf("subscribeAnchor")-1)});if(B(".wc_main_comm_form").length){e()}B(document).delegate(".wc-reply-link","click",function(){if(B(this).hasClass("wpdiscuz-clonned")){B("#wc-secondary-form-wrapper-"+l(B(this),0)).slideToggle(700)}else{g(B(this))}e()});B(document).delegate("textarea.wc_comment","focus",function(){B(this).autoGrow();var W=B(this).parents(".wc-form-wrapper");B(".wc-form-footer",W).slideDown(700)});B(document).delegate(".wc-share-link","click",function(){var W=B(this).parents(".wc-comment-right");B(".share_buttons_box",W).slideToggle(1000)});B(document).delegate(".wpdiscuz-nofollow,.wc_captcha_refresh_img,.wc-toggle,.wc-load-more-link","click",function(W){W.preventDefault()});B(document).delegate(".wc-toggle","click",function(){var X=l(B(this),0);var W=B(this);B("#wc-comm-"+X+"> .wc-reply").slideToggle(700,function(){if(B(this).is(":hidden")){W.html(wpdiscuz_ajax_obj.wpdiscuz_options.wc_show_replies_text+" &or;")}else{W.html(wpdiscuz_ajax_obj.wpdiscuz_options.wc_hide_replies_text+" &and;")}})});B(document).delegate(".wc-new-loaded-comment","mouseenter",function(){if(B(this).hasClass("wc-reply")){B(">.wc-comment-right",B(this)).animate({backgroundColor:wpdiscuz_ajax_obj.wpdiscuz_options.wc_reply_bg_color},1500)}else{B(">.wc-comment-right",B(this)).animate({backgroundColor:wpdiscuz_ajax_obj.wpdiscuz_options.wc_comment_bg_color},1500)}});B(document).delegate(".wc_captcha_refresh_img","click",function(){N(B(this))});function N(aa){if(p||O){var Y=aa.parents(".wc-form-wrapper");var W=Y.hasClass("wc-secondary-form-wrapper")?0:1;var ab=l(aa,W);var Z="uniqueId="+ab;var X=d("generateCaptcha",Z);X.done(function(ad){try{var ah=B.parseJSON(ad);if(ah.code==1){var af=B(aa).prev().children(".wc_captcha_img");var aj=af.attr("src");var ac=aj.lastIndexOf("/")+1;var ae=aj.substring(0,ac)+ah.message;af.attr("src",ae);var ai=B(".wpdiscuz-cnonce",Y);ai.attr("id",ah.key);ai.attr("value",ah.key)}}catch(ag){console.log(ag)}})}}B(document).delegate(".wc_comm_submit","click",function(){var aa=1;var X=B(this).parents("form");if(!X.hasClass("wc_main_comm_form")){aa=A(B(this).parents(".wc-comment"))}if(!wpdiscuz_ajax_obj.wpdiscuz_options.is_email_field_required&&B(".wc_email",X).val()){B(".wc_email",X).attr("required","required")}if(!wpdiscuz_ajax_obj.wpdiscuz_options.is_email_field_required&&!(B(".wc_email",X).val())){B(".wc_email",X).removeAttr("required");B(".wc_email",X).next(".alert").html("")}if(wpdiscuzValidator.checkAll(X)){var W=X.serialize()+"&wc_comment_depth="+aa+"&comment_post_ID="+m;if(p||O){var Y=B(".wc_captcha_img",X);var Z=Y.attr("src");var ac=Z.lastIndexOf("/")+1;var ab=Z.substring(ac);W+="&fileName="+ab}if(wpdiscuz_ajax_obj.wpdiscuz_options.wpdiscuz_zs){W+="&wpdiscuz_zs="+wpdiscuz_ajax_obj.wpdiscuz_options.wpdiscuz_zs}d("addComment",W).done(function(ae){var af="";var ag="";try{var ai=B.parseJSON(ae);af=ai.code;if(parseInt(af)>=0){var ad=ai.is_main;ag=ai.message;B(".wc_header_text_count").html(ai.wc_all_comments_count_new);if(ad){B(".wc-thread-wrapper").prepend(ag)}else{B("#wc-secondary-form-wrapper-"+af).slideToggle(700);if(ai.is_in_same_container==1){B("#wc-secondary-form-wrapper-"+af).after(ag)}else{B("#wc-secondary-form-wrapper-"+af).after(ag.replace("wc-reply","wc-reply wc-no-left-margin"))}}n(ai);S(ai);s(X,ai);X.get(0).reset();e()}else{ag=wpdiscuz_ajax_obj.wpdiscuz_options[af];r(X,af,ag,true)}}catch(ah){if(ae.indexOf("<")>=0&&ae.indexOf(">")>=0){ag=ah}else{ag=ae}r(X,"wc_invalid_field",ag,true)}C();B(".wpdiscuz-loading-bar").hide()})}N(B(".wc_captcha_refresh_img",X))});function n(Y){if(!Y.held_moderate){var X="post_id="+m+"&comment_id="+Y.new_comment_id+"&email="+Y.user_email+"&isParent="+Y.is_main;var W=d("checkNotificationType",X);W.done(function(Z){try{Y=B.parseJSON(Z)}catch(aa){console.log(aa)}})}}function S(Y){if(Y.redirect>0&&Y.new_comment_id){var X="commentId="+Y.new_comment_id;var W=d("redirect",X);W.done(function(Z){Y=B.parseJSON(Z);if(Y.code==1){setTimeout(function(){window.location.href=Y.redirect_to},5000)}})}}function e(){if(B.cookie("wc_author_name")){B(".wc_comm_form .wc_name").val(B.cookie("wc_author_name"))}if(B.cookie("wc_author_email")){B(".wc_comm_form .wc_email").val(B.cookie("wc_author_email"))}if(B.cookie("wc_author_website")){B(".wc_comm_form .wc_website").val(B.cookie("wc_author_website"))}}function s(W,X){if(B(".wc_email",W).val()){B.cookie("wc_author_email",B(".wc_email",W).val())}else{B.cookie("wc_author_email",X.user_email)}if(B(".wc_name",W).val()){B.cookie("wc_author_name",B(".wc_name",W).val())}else{B.cookie("wc_author_name",X.user_name)}B.cookie("wc_author_website",B(".wc_website",W).val())}var R;B(document).delegate(".wc_editable_comment","click",function(){var Z=l(B(this),0);var W=U(Z);var Y=B(this);var X="commentId="+W;d("editComment",X).done(function(ab){try{var af=B.parseJSON(ab);var ad="";var ac=af.code;if(parseInt(ac)>=0){R=af.message;var aa='<textarea required="required" name="wc_comment" class="wc_comment wc_field_input wc_edit_comment" id="wc_edit_comment-'+Z+'" style="min-height: 2em;">'+af.message+"</textarea>";B("#wc-comm-"+Z+" > .wc-comment-right .wc-comment-text").replaceWith(aa);document.getElementById("wc_edit_comment-"+Z).focus();B("#wc-comm-"+Z+" > .wc-comment-right .wc-comment-footer .wc_save_edited_comment").show();aa="";B("#wc-comm-"+Z+" > .wc-comment-right .wc-comment-footer .wc_editable_comment").hide();B("#wc-comm-"+Z+" > .wc-comment-right .wc-comment-footer .wc_cancel_edit").show()}else{ad=wpdiscuz_ajax_obj.wpdiscuz_options[ac];r(Y,ac,ad,false)}}catch(ae){console.log(ae)}B(".wpdiscuz-loading-bar").hide()})});B(document).delegate(".wc_save_edited_comment","click",function(){var ab=l(B(this));var X=U(ab);var W=B("#wc-comm-"+ab+" textarea#wc_edit_comment-"+ab);var Y=W.val();var aa=B(this);if(B.trim(Y).length>0){var Z="commentId="+X+"&commentContent="+Y;d("saveEditedComment",Z).done(function(ac){try{var ag=B.parseJSON(ac);var ad=ag.code;var ae="";if(parseInt(ad)>=0){H(ab,ag.message)}else{ae=wpdiscuz_ajax_obj.wpdiscuz_options[ad];r(aa,ad,ae,false)}W="";Y=""}catch(af){console.log(af)}B(".wpdiscuz-loading-bar").hide()})}});B(document).delegate(".wc_cancel_edit","click",function(){var W=l(B(this));H(W,R)});function H(Y,X){B("#wc-comm-"+Y+" > .wc-comment-right .wc-comment-footer .wc_editable_comment").show();B("#wc-comm-"+Y+" > .wc-comment-right .wc-comment-footer .wc_cancel_edit").hide();B("#wc-comm-"+Y+" > .wc-comment-right .wc-comment-footer .wc_save_edited_comment").hide();var W='<div class="wc-comment-text">'+j(X)+"</div>";B("#wc-comm-"+Y+" #wc_edit_comment-"+Y).replaceWith(W)}function j(Z,Y){var X=(Y||typeof Y==="undefined")?"<br/>":"<br>";var W=(Z+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+X+"$2");return W.replace("<br><br>","<br/>")}B(document).delegate(".wc-load-more-submit","click",function(){E()});var o=B("#wpdiscuzHasMoreComments").val();var D=false;if(z==2&&!T){B(".wc-load-more-submit").parents(".wpdiscuz-comment-pagination").hide();B(window).scroll(function(){var W=document.getElementById("wcThreadWrapper").scrollHeight;if(B(window).scrollTop()>=W&&D===false&&o){D=true;E()}})}function E(){var W;if(k=="meta_value_num"){W="offset="+b+"&orderBy="+k+"&order="+a;b++}else{W="orderBy="+k+"&order="+a+"&lastParentId="+u()}W+="&postId="+m+"&loadAllCommnts="+z;d("loadMoreComments",W).done(function(X){try{var Z=B.parseJSON(X);B(".wpdiscuz-comment-pagination").before(Z.comment_list);q(Z);B(".wpdiscuz_single").remove();D=false;o=Z.is_show_load_more}catch(Y){console.log(Y)}C();B(".wpdiscuz-loading-bar").hide();B(".wc-load-more-submit").blur()})}function q(W){if(W.is_show_load_more!=false){M(W.last_parent_id)}else{B(".wc-load-more-submit").parents(".wpdiscuz-comment-pagination").hide()}}B(document).delegate(".wc_vote","click",function(){var W=B(this);var Z="";var aa="";var X=B(this).parents(".wc-comment-right").attr("id");X=X.substring(X.lastIndexOf("-")+1);var Y;if(B(this).hasClass("wc-up")){Y=1}else{Y=-1}var ab="commentId="+X+"&voteType="+Y;d("voteOnComment",ab).done(function(ac){try{var ae=B.parseJSON(ac);Z=ae.code;if(parseInt(Z)>=0){var af=B(".wc-comment-footer .wc-vote-result",B("#comment-"+X));B(af).text(parseInt(B(af).text())+Y)}else{aa=wpdiscuz_ajax_obj.wpdiscuz_options[Z];r(W,Z,aa,false)}}catch(ad){console.log(ad)}B(".wpdiscuz-loading-bar").hide()})});B(document).delegate(".wpdiscuz-sort-button","click",function(){o=1;if(!(B(this).hasClass("wpdiscuz-sort-button-active"))){var Z=B(this);if(B(this).hasClass("wpdiscuz-vote-sort-up")){k="meta_value_num";a="desc"}else{k="comment_date_gmt";a=B(this).hasClass("wpdiscuz-date-sort-desc")?"desc":"asc"}var Y="postId="+m+"&orderBy="+k+"&order="+a;var W="";var X="";d("wpdiscuzSorting",Y).done(function(aa){try{var ac=B.parseJSON(aa);W=ac.code;X=ac.message;if(parseInt(W)>0){B("#wpcomm .wc-thread-wrapper .wc-comment").each(function(){B(this).remove()});B("#wpcomm .wc-thread-wrapper").prepend(X);b=parseInt(ac.loadCount)}else{}J(Z);q(ac)}catch(ab){console.log(ab)}C();B(".wpdiscuz-loading-bar").hide()})}});function J(W){B(".wpdiscuz-sort-buttons .wpdiscuz-sort-button").each(function(){B(this).removeClass("wpdiscuz-sort-button-active")});W.addClass("wpdiscuz-sort-button-active")}function V(){var aa=location.href;var Z=aa.match(/#comment\-(\d+)/);if(Z!==null){var X=Z[1];if(!B("#comment-"+X).length){var Y="commentId="+X;var W=d("getSingleComment",Y);W.done(function(ab){try{var ad=B.parseJSON(ab);B(".wc-thread-wrapper").prepend(ad.message);B("html, body").animate({scrollTop:B(".wc-thread-wrapper").offset().top},1000)}catch(ac){console.log(ac)}C();B(".wpdiscuz-loading-bar").hide()})}}}V();if(i>0&&Q&&(P||(!P&&!G))){setInterval(L,parseInt(h)*1000)}function L(){var Z=y();var X=(B.cookie("wc_author_email")!=undefined&&B.cookie("wc_author_email")!="")?B.cookie("wc_author_email"):"";var Y="postId="+m+"&loadLastCommentId="+Q+"&visibleCommentIds="+Z+"&email="+X;var W=d("liveUpdate",Y);W.done(function(ab){try{var ag=B.parseJSON(ab);if(ag.code==1){if(i==1){w(ag)}else{t=t.concat(ag.message.comments);K=K.concat(ag.message.author_replies);var ac=t.length;var aa=K.length;if(ac>0){var ae=ac+" ";ae+=ac>1?wpdiscuz_ajax_obj.wpdiscuz_options.wc_new_comments_button_text:wpdiscuz_ajax_obj.wpdiscuz_options.wc_new_comment_button_text;B(".wc_new_comment").html(ae).show()}else{B(".wc_new_comment").hide()}if(aa>0){var ad=aa+" ";ad+=aa>1?wpdiscuz_ajax_obj.wpdiscuz_options.wc_new_replies_button_text:wpdiscuz_ajax_obj.wpdiscuz_options.wc_new_reply_button_text;B(".wc_new_reply").html(ad).show()}else{B(".wc_new_reply").hide()}}B(".wc_header_text_count").html(ag.wc_all_comments_count_new);Q=ag.loadLastCommentId}}catch(af){console.log(af)}C();B(".wpdiscuz-loading-bar").hide()})}function w(Z){if(Z.message!==undefined){var W;var Y=Z.message;for(var X=0;X<Y.length;X++){W=Y[X];v(W.comment_parent,W.comment_html)}}}B(document).delegate(".wc-update-on-click","click",function(){var W;var X=B(this);if(X.hasClass("wc_new_comment")){W=t.join()}else{W=K.join()}d("updateOnClick",W).done(function(Y){try{var aa=B.parseJSON(Y);w(aa);if(X.hasClass("wc_new_comment")){t=[];B(".wc_new_comment").hide()}else{K=[];B(".wc_new_reply").hide()}}catch(Z){console.log(Z)}C();B(".wpdiscuz-loading-bar").hide()})});function r(aa,X,Z,Y){var W;var ab;if(Y){ab=aa.parents(".wc-form-wrapper")}else{ab=aa.closest(".wc-comment")}W=ab.children(".wpdiscuz-comment-message");W.addClass(X);W.html(Z);W.show().delay(5000).fadeOut(1000,function(){W.removeClass();W.addClass("wpdiscuz-comment-message");W.html("")})}function g(X){var Y=l(X,0);B("#wpdiscuz_form_anchor-"+Y).before(I(Y));var W=B("#wc-secondary-form-wrapper-"+Y);W.slideToggle(700,function(){X.addClass("wpdiscuz-clonned")});N(B(".wc_captcha_refresh_img",W))}function I(X){var W=B("#wpdiscuz_hidden_secondary_form").html();return W.replace(/wpdiscuzuniqueid/g,X)}function l(Y,X){var W="";if(X){W=Y.parents(".wc-main-form-wrapper").attr("id")}else{W=Y.parents(".wc-comment").attr("id")}var Z=W.substring(W.lastIndexOf("-")+1);return Z}function U(W){return W.substring(0,W.indexOf("_"))}function x(X){var W=X.substring(X.indexOf("_")+1);return W}function u(){var W=B(".wc-load-more-link").attr("href");return W.substring(W.lastIndexOf("=")+1)}function M(W){var X=B(".wc-load-more-link").attr("href");B(".wc-load-more-link").attr("href",X.replace(/[\d]+$/m,W));if(z!=2){B(".wpdiscuz-comment-pagination").show()}}function A(Y){var X=Y.attr("class");var W=X.split(" ");var Z="";B.each(W,function(aa,ab){if("wc_comment_level"===c(ab,false)){Z=c(ab,true)}});return parseInt(Z)+1}function c(W,X){var Y="";if(X){Y=W.substring(W.indexOf("-")+1)}else{Y=W.substring(0,W.indexOf("-"))}return Y}function v(Y,X){if(Y==0){B(".wc-thread-wrapper").prepend(X)}else{var W=l(B("#comment-"+Y),0);B("#wpdiscuz_form_anchor-"+W).after(X)}}function y(){var Y;var W;var X="";B(".wc-comment-right").each(function(){Y=l(B(this),0);W=U(Y);X+=W+","});return X}function C(){B(".wc-comment-img-link").tooltipster({trigger:"click",contentAsHTML:true,interactive:true,multiple:true});B(".wc_tooltipster").tooltipster({offsetY:2,multiple:true})}function f(){if(B(".wc_social_plugin_wrapper .wp-social-login-provider-list").length){B(".wc_social_plugin_wrapper .wp-social-login-provider-list").clone().prependTo("#wpdiscuz_hidden_secondary_form > .wc-form-wrapper >  .wc-secondary-forms-social-content")}else{if(B(".wc_social_plugin_wrapper .the_champ_login_container").length){B(".wc_social_plugin_wrapper .the_champ_login_container").clone().prependTo("#wpdiscuz_hidden_secondary_form > .wc-form-wrapper >  .wc-secondary-forms-social-content")}else{if(B(".wc_social_plugin_wrapper .social_connect_form").length){B(".wc_social_plugin_wrapper .social_connect_form").clone().prependTo("#wpdiscuz_hidden_secondary_form > .wc-form-wrapper >  .wc-secondary-forms-social-content")}else{if(B(".wc_social_plugin_wrapper .oneall_social_login_providers").length){B(".wc_social_plugin_wrapper .oneall_social_login .oneall_social_login_providers").clone().prependTo("#wpdiscuz_hidden_secondary_form > .wc-form-wrapper >  .wc-secondary-forms-social-content")}}}}}function d(X,W){if(X!=="liveUpdate"&&X!=="generateCaptcha"){B(".wpdiscuz-loading-bar").show()}return B.ajax({type:"POST",url:wpdiscuz_ajax_obj.url,data:{wpdiscuzAjaxData:W,action:X}})}});